<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Studio de Production - Cahier des Charges 3D</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Cinematic Noir -->
    <!-- Application Structure Plan: The SPA is now structured as a "Production Studio" dashboard. The cinematic, dark-themed UI enhances user immersion. The core functionality remains a filterable grid of project cards, now styled as "production slates," which open detailed modals. The removal of charts simplifies the interface, focusing entirely on the core task: finding and understanding creative missions. This thematic structure is more engaging for design students and aligns with the "cinema universe" goal. -->
    <!-- Visualization & Content Choices: 
        - Overall Structure (Report Info -> Project structure & deliverables): Presented via a thematic dashboard layout (HTML/Tailwind) with a dark, cinematic UI. Interaction: filtering and card clicks. Justification: Creates an immersive and engaging experience tailored to the student audience.
        - Deliverables Section (Report Info -> Video deliverables): Goal: Inform. Presentation: Styled "briefing cards" (HTML/CSS) with thematic icons (üéûÔ∏è, ‚ú®). The personal project is reframed as "Votre Publicit√©" for better engagement. Justification: Clearly and thematically communicates the final goals.
        - Group/Student Missions (Report Info -> All qualitative text): Goal: Inform. Presentation: Styled text blocks within a dark-themed modal, with clear title/description separation for readability and improved visual hierarchy. Interaction: Revealed on card click, ESC key to close, and full keyboard navigation (focus trap). Justification: Improves usability and accessibility.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #121212;
            color: #EAEAEA;
        }
        h1, h2, h3, h4 {
            font-family: 'Playfair Display', serif;
        }
        .text-gold { color: #D4AF37; }
        .bg-card { background-color: #1E1E1E; }
        .border-card { border-color: #333333; }
        .border-gold { border-color: #D4AF37; }
        .modal {
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
        .card-hover {
            transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
            border: 1px solid #333333;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 25px rgba(212, 175, 55, 0.15);
            border-color: rgba(212, 175, 55, 0.5);
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1E1E1E;
        }
        ::-webkit-scrollbar-thumb {
            background: #444444;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #D4AF37;
        }
        input::placeholder {
            color: #999;
        }
        .highlight {
            background-color: rgba(212, 175, 55, 0.15);
            border-left: 3px solid #D4AF37;
            border-radius: 2px;
        }
    </style>
</head>
<body class="antialiased">

    <div id="app-container" class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
        
        <header class="text-center mb-16">
            <h1 class="text-5xl sm:text-7xl font-bold text-white tracking-wider">STUDIO DE PRODUCTION</h1>
            <div class="mt-4 text-lg text-gold uppercase tracking-[0.2em]">Cahier des Charges 3D</div>
        </header>

        <section id="deliverables" class="mb-16 bg-card/50 p-6 rounded-2xl border border-card">
            <h2 class="text-3xl font-semibold text-gold mb-6 text-center">Les Livrables</h2>
            <div class="flex flex-col md:flex-row justify-center items-stretch gap-8 text-center">
                <div class="flex-1 bg-card p-8 rounded-xl border border-card">
                    <span class="text-6xl">üéûÔ∏è</span>
                    <h3 class="text-2xl font-bold text-white mt-4 mb-2">Film de Projet de Groupe</h3>
                    <p class="text-gray-300"><strong class="font-semibold text-gold">Dur√©e :</strong> 90 √† 120 secondes</p>
                    <p class="text-sm text-gray-400 mt-3">Racontez l'histoire de votre univers. La vid√©o doit pr√©senter l'espace complet et d√©montrer la synergie de vos cr√©ations.</p>
                </div>
                <div class="flex-1 bg-card p-8 rounded-xl border border-card">
                    <span class="text-6xl">‚ú®</span>
                    <h3 class="text-2xl font-bold text-white mt-4 mb-2">Votre Publicit√© (Spot 20-30s)</h3>
                    <p class="text-gray-300"><strong class="font-semibold text-gold">Dur√©e :</strong> 20 √† 30 secondes</p>
                    <p class="text-sm text-gray-400 mt-3">C'est votre carte de visite. Mettez en valeur votre mod√©lisation sous son meilleur jour, en soulignant les d√©tails et votre savoir-faire.</p>
                </div>
            </div>
        </section>

        <section id="projects">
            <h2 class="text-3xl font-semibold text-gold mb-8 text-center">Les Productions en Cours</h2>
            <div class="sticky top-0 z-10 bg-[#121212]/80 backdrop-blur-md py-4 mb-8 rounded-xl">
                <div class="flex flex-col sm:flex-row gap-4 items-center justify-center">
                    <input type="text" id="student-search" list="student-list" placeholder="Trouver un r√©alisateur..." class="w-full sm:w-96 bg-card border border-card rounded-lg py-2 px-4 leading-tight focus:outline-none focus:bg-card focus:border-gold">
                    <datalist id="student-list"></datalist>
                </div>
            </div>

            <div id="projects-grid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8">
            </div>
        </section>
    </div>

    <div id="project-modal" class="modal invisible opacity-0 fixed inset-0 w-full h-full z-50 flex items-center justify-center bg-black bg-opacity-70 backdrop-blur-sm p-4">
        <div class="modal-content transform -translate-y-10 bg-card w-full max-w-3xl max-h-[90vh] rounded-2xl shadow-2xl flex flex-col border border-card">
            <div class="p-6 border-b border-card flex justify-between items-center flex-shrink-0">
                <h2 id="modal-title" class="text-2xl font-bold text-gold"></h2>
                <button id="modal-close" class="text-gray-400 hover:text-white text-4xl leading-none">&times;</button>
            </div>
            <div class="p-6 overflow-y-auto">
                <div id="modal-body"></div>
            </div>
        </div>
    </div>

    <script>
        const projectData = [
            {
                id: 1, name: "The Nexus: Multi-Verse Library", mission: "Cr√©ez un sanctuaire immersif pour les fans de fiction. Chaque zone th√©matique doit transporter le visiteur dans son univers favori gr√¢ce √† un design (architecture, mobilier, lumi√®re) qui raconte une histoire.",
                students: [
                    { name: "Rayane", class: "B", mission: { title: "Le Tr√¥ne de la Marionnettiste", description: "Mod√©lisez un fauteuil de lecture sculptural pour la zone Manwha. Ce doit √™tre une ≈ìuvre d'art √©voquant pouvoir et √©l√©gance, qui invite √† l'immersion." } },
                    { name: "Erudice", class: "B", mission: { title: "Le Sanctuaire Otaku", description: "Imaginez un syst√®me de lecture modulaire sous forme d'alc√¥ves ou de cocons personnalis√©s, o√π chaque niche est d√©di√©e √† une s√©rie culte." } },
                    { name: "Pascal", class: "A", mission: { title: "La Station de Gaming Immersive", description: "Int√©grez un setup de jeu complet dans une biblioth√®que, en soignant la gestion des c√¢bles, l'√©clairage et les supports pour figurines." } },
                    { name: "Jennifer", class: "B", mission: { title: "La Porte des Mondes", description: "Concevez l'entr√©e principale du Nexus. Qu'il s'agisse d'une arche ou d'une biblioth√®que-portail, sa structure doit sugg√©rer le passage entre les univers." } }
                ]
            },
            {
                id: 2, name: "Fourth Gen Studio", mission: "Imaginez un laboratoire cr√©atif o√π les outils physiques et les ≈ìuvres num√©riques fusionnent. L'espace doit √™tre modulable et inspirant, avec une architecture qui participe elle-m√™me au processus de cr√©ation.",
                students: [
                    { name: "Achabys", class: "B", mission: { title: "L'Installation Cin√©tique Murale", description: "Cr√©ez une surface murale \"vivante\" avec des panneaux rotatifs. Votre installation doit permettre de jouer avec la lumi√®re et la texture pour animer les projections 3D." } },
                    { name: "Rolyx", class: "A", mission: { title: "Le Poste de Rendu \"Think Outside the Box\"", description: "Concevez le poste de travail ultime pour un artiste num√©rique, en alliant une ergonomie parfaite √† une esth√©tique futuriste et audacieuse." } },
                    { name: "Duamel", class: "B", mission: { title: "Le Mur d'Inspiration Modulable", description: "Proposez un syst√®me d'affichage (magn√©tique, modulable) √† la fois fonctionnel et esth√©tique, qui devient une composition artistique √©volutive." } },
                    { name: "Lois", class: "B", mission: { title: "L'Autel des Sens", description: "Mod√©lisez un diffuseur de parfum sculptural et un syst√®me d'√©clairage d'ambiance qui permettent de cr√©er une atmosph√®re unique pour la photographie." } }
                ]
            },
            {
                id: 3, name: "The Blockbuster Factory", mission: "L'enjeu de ce projet est la transformation. Votre mission est de concevoir un espace cam√©l√©on, capable de changer radicalement d'ambiance en un temps record. La modularit√©, l'ing√©niosit√© et la polyvalence du mobilier sont les cl√©s du succ√®s.",
                students: [
                    { name: "Iris", class: "A", mission: { title: "Le Bar de Toretto", description: "Cr√©ez un bar mobile au design industriel, inspir√© de *Fast & Furious*. Il doit √™tre robuste, fonctionnel et suffisamment charismatique pour devenir une pi√®ce centrale." } },
                    { name: "Noriane", class: "A", mission: { title: "La Loge de Star \"PDG\"", description: "Am√©nagez une loge de pr√©paration luxueuse et high-tech. Pensez au confort et √† l'efficacit√© professionnelle en int√©grant un miroir, un √©clairage et des rangements optimaux." } },
                    { name: "Lindsay", class: "B", mission: { title: "Le Salon Modulable", description: "Concevez un ensemble de meubles (canap√©s, tables) comme des \"briques de Lego\" pour un r√©alisateur, faciles √† d√©placer et √† reconfigurer pour cr√©er une multitude d'ambiances." } },
                    { name: "Kassandra", class: "A", mission: { title: "La Cuisine de \"Bricoleuse\"", description: "Mod√©lisez une cuisine de plateau de tournage. Elle doit √™tre esth√©tique sous tous les angles, fonctionnelle et facilement adaptable √† diff√©rents sc√©narios." } }
                ]
            },
            {
                id: 4, name: "The Power Suit Office", mission: "Votre mission est de mat√©rialiser le pouvoir, l'ambition et l'√©l√©gance dans un environnement de travail. Chaque meuble et chaque mat√©riau doit respirer le succ√®s et la confiance. Concevez une v√©ritable d√©claration de statut, un espace con√ßu pour prendre des d√©cisions qui changent la donne.",
                students: [
                    { name: "Ghintia", class: "B", mission: { title: "Le Bureau de l'Associ√© Principal", description: "Concevez un bureau qui impose le respect par son design et ses mat√©riaux nobles (bois sombre, marbre). Il doit √™tre massif mais √©l√©gant." } },
                    { name: "Gloria", class: "A", mission: { title: "La Salle du Conseil d'Administration", description: "Imaginez une table de r√©union imposante qui favorise la communication, en int√©grant la technologie (connectique, √©crans) de mani√®re invisible." } },
                    { name: "Vianney", class: "B", mission: { title: "Le Bureau Ex√©cutif Augment√©", description: "Cr√©ez un poste de contr√¥le personnel o√π design et technologie fusionnent. Int√©grez des surfaces tactiles et des rangements secrets pour une efficacit√© absolue." } },
                    { name: "Ian", class: "A", mission: { title: "La Biblioth√®que Juridique Murale", description: "Concevez une biblioth√®que monumentale qui agit comme un mur de savoir et de prestige, structurant l'espace et affirmant l'autorit√© du lieu." } }
                ]
            },
            {
                id: 5, name: "The Street Food Arena", mission: "Votre objectif est de capturer l'√©nergie brute de la rue et de la canaliser dans un lieu vibrant et √©lectrique. Pensez cet espace comme un festival permanent o√π le design industriel, fonctionnel et un peu rebelle sert de sc√®ne √† la culture urbaine et culinaire.",
                students: [
                    { name: "Tryphose", class: "B", mission: { title: "Le Totem Urbain : Bar & DJ Booth", description: "Cr√©ez une structure centrale (type container/√©chafaudage) qui sert √† la fois de bar principal et de cabine sur√©lev√©e pour le DJ. Elle doit √™tre un point de ralliement visible." } },
                    { name: "Sarah", class: "A", mission: { title: "Le Stand de P√¢tisserie Urbaine", description: "Imaginez un kiosque ou un food truck au design cr√©atif, attractif et hyper-fonctionnel dans un espace r√©duit." } },
                    { name: "Gr√¢ce", class: "B", mission: { title: "La Cuisine de Battle Ouverte", description: "Concevez le \"ring\" des chefs. L'ergonomie et l'efficacit√© sont essentielles pour la performance sous pression, tout en offrant un spectacle au public." } },
                    { name: "Stessy", class: "A", mission: { title: "La Sc√®ne DJ / √âv√©nementiel", description: "Mod√©lisez une petite sc√®ne √† fort impact visuel pour l'animateur et le DJ, √©quip√©e pour chauffer la foule." } }
                ]
            },
            {
                id: 6, name: "The Oasis: Detox & Design", mission: "Concevez une exp√©rience de d√©connexion totale √† travers le design. Ce spa futuriste doit √™tre un lieu √©pur√© et surprenant, o√π la technologie est utilis√©e pour amplifier les sensations et apaiser l'esprit. Chaque d√©tail doit contribuer √† cr√©er une bulle hors du temps.",
                students: [
                    { name: "Brunelle", class: "B", mission: { title: "La Chaise Longue 'Nail Art' Sculpturale", description: "Imaginez une chaise longue comme une sculpture fonctionnelle. Inspirez-vous de l'onglerie pour ses formes fluides et sa finition laqu√©e, sans tomber dans le litt√©ral." } },
                    { name: "Myra", class: "B", mission: { title: "Le Mini-Booth de Coiffure Interactif", description: "Concevez un espace privatif et luxueux pour la coiffure et le maquillage. Votre mission est de dessiner l'architecture du booth, en int√©grant un miroir interactif comme pi√®ce centrale. Pensez au mobilier (fauteuil, rangements) et √† l'√©clairage pour cr√©er une exp√©rience exclusive." } },
                    { name: "√âmeraude", class: "A", mission: { title: "Le Hammam Sc√©nographique", description: "Concevez un hammam o√π une exp√©rience lumineuse et sonore compl√®te la chaleur. L'√©clairage programmable doit cr√©er des ambiances immersives et √©volutives." } },
                    { name: "Esther", class: "B", mission: { title: "La Salle de Repos Dystopique", description: "Am√©nagez un cocon de m√©ditation o√π des projections √† 360¬∞ transforment l'espace en un paysage mental apaisant, offrant une √©vasion visuelle." } }
                ]
            },
            {
                id: 7, name: "The Lore Lodge", mission: "Votre d√©fi est de cr√©er des chambres qui racontent une histoire immersive. Le client ne doit pas simplement occuper une chambre, il doit habiter un univers. Chaque objet, du lit au balcon, doit √™tre un chapitre de ce r√©cit qui rend l'exp√©rience inoubliable.",
                students: [
                    { name: "Elicia", class: "B", mission: { title: "Le Lit Signature", description: "Mod√©lisez un lit et sa t√™te de lit comme la d√©claration principale de l'univers choisi (culture, ethnie, fiction), en alliant un design fort et un confort optimal." } },
                    { name: "Faghez", class: "B", mission: { title: "Le Dressing Th√©matique", description: "Concevez un espace de rangement qui prolonge l'univers de la chambre. Utilisez des mat√©riaux, motifs ou syst√®mes d'ouverture qui rappellent l'inspiration choisie." } },
                    { name: "Loan", class: "A", mission: { title: "L'Ouverture sur le Monde", description: "Imaginez un balcon ou une fen√™tre qui soit aussi une fen√™tre sur l'imaginaire. Int√©grez obligatoirement des VFX pour augmenter la r√©alit√© en projetant des √©l√©ments de l'univers choisi." } },
                    { name: "Lydia", class: "A", mission: { title: "L'Assise Principale", description: "Cr√©ez les fauteuils ou le canap√© du coin salon. Leurs formes, textures et couleurs doivent √™tre sculpturales et ancrer imm√©diatement le visiteur dans le th√®me de la chambre." } }
                ]
            },
            {
                id: 8, name: "The Mind Retreat", mission: "Votre objectif est de concevoir un refuge pour l'esprit, un lieu de reconnexion avec soi-m√™me et la nature. L'architecture doit √™tre humble et au service du bien-√™tre, en privil√©giant la lumi√®re naturelle, les mat√©riaux bruts et la vue sur l'ext√©rieur.",
                students: [
                    { name: "Coralie", class: "B", mission: { title: "La Biblioth√®que Personnalis√©e", description: "Imaginez une biblioth√®que qui invite √† la d√©couverte, avec un √©clairage qui met en valeur les livres ou des modules reconfigurables en assises." } },
                    { name: "Ruth A.", class: "B", mission: { title: "Le Chevalet de Peinture face √† la Mer", description: "Cr√©ez un espace de cr√©ation minimaliste o√π chaque √©l√©ment (chevalet, si√®ge, rangement) est un bel objet fonctionnel en harmonie avec le paysage." } },
                    { name: "Jessica", class: "A", mission: { title: "Le Mur V√©g√©tal Int√©rieur/Ext√©rieur", description: "Concevez une transition douce entre l'int√©rieur et la nature avec un mur de plantes qui semble entrer dans la pi√®ce." } },
                    { name: "Ronelle", class: "A", mission: { title: "Le Lit-Nid de Lecture", description: "Imaginez un lit non pas pour dormir, mais pour s'√©vader. Confortable, enveloppant, avec √©clairage et rangements int√©gr√©s, ce doit √™tre le refuge parfait pour lire." } },
                    { name: "Marie T.", class: "A", mission: { title: "La Sc√®ne de Cr√©ation", description: "Concevez une table basse comme un mini-atelier, avec une surface de travail inspirante et un √©clairage sp√©cifique qui en fait un point focal cr√©atif." } }
                ]
            },
            {
                id: 9, name: "S√®me City Open Park (SCOP)", mission: "Ce projet a un impact r√©el. Votre mission est de proposer une vision qui transforme un espace public en un lieu de vie plus agr√©able, fonctionnel et esth√©tique. Chaque √©l√©ment doit √™tre pens√© pour l'usage des citoyens, la durabilit√© et l'identit√© de la ville.",
                students: [
                    { name: "Ashley", class: "B", mission: { title: "La Toiture Dansante & Intelligente", description: "Cr√©ez une structure d'ombrage sculpturale. Le d√©fi est de concevoir des formes organiques qui sont aussi fonctionnelles, en int√©grant un syst√®me de r√©cup√©ration d'eau de pluie." } },
                    { name: "Korel", class: "A", mission: { title: "L'Abri Urbain Modulaire", description: "Concevez des abris qui soient des points de rencontre confortables et s√©curisants, avec un design moderne et adaptable √† diff√©rents lieux du parc." } },
                    { name: "Lidwine", class: "A", mission: { title: "Le Mobilier Institutionnel", description: "Imaginez des bancs, poubelles et bornes d'information qui participent √† l'identit√© visuelle du parc par un design robuste, ergonomique et esth√©tique." } },
                    { name: "Shaneen", class: "A", mission: { title: "L'Aire de Jeux \"Kawaii\"", description: "Cr√©ez une aire de jeux qui stimule l'imagination en toute s√©curit√©, avec des formes douces, des couleurs vives et des structures originales." } }
                ]
            },
            {
                id: 10, name: "The Kinetic Stage", mission: "Pensez ce studio comme une sc√®ne de th√©√¢tre pour la cr√©ation. L'espace doit se m√©tamorphoser selon les besoins (shooting, atelier, showroom). Le mobilier est mobile, transformable et se d√©ploie pour s'adapter √† chaque projet cr√©atif.",
                students: [
                    { name: "Zirwath", class: "B", mission: { title: "Le portant √† v√™tements sculptural", description: "R√©inventez le portant pour qu'il soit une pi√®ce de design qui les met en valeur. Sa mobilit√© et sa modularit√© sont essentielles." } },
                    { name: "Aubine", class: "A", mission: { title: "Le miroir sur pied \"filaire\"", description: "Concevez un miroir l√©ger et po√©tique, inspir√© de vos tableaux filaires, avec une structure fine, √©l√©gante et facile √† d√©placer." } },
                    { name: "Ma√´lys", class: "A", mission: { title: "La table de cr√©ation \"rustique minimaliste\"", description: "Imaginez une grande table de travail en mat√©riaux bruts, con√ßue intelligemment pour pouvoir se diviser en plusieurs postes ind√©pendants." } },
                    { name: "Tiffany (Boni)", class: "A", mission: { title: "Le salon d'accueil modulable", description: "Cr√©ez un ensemble de si√®ges pour l'accueil qui puisse se reconfigurer facilement, passant d'une zone d'attente √† un espace de brainstorming." } },
                    { name: "Roxane", class: "A", mission: { title: "La Station d'√âcoute R√©tro-Kinetic", description: "Concevez un meuble qui cache et r√©v√®le une platine vinyle. Le d√©fi est de mod√©liser le m√©canisme d'ouverture, alliant bois r√©tro et mouvement cin√©tique." } }
                ]
            }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            const projectsGrid = document.getElementById('projects-grid');
            const studentSearch = document.getElementById('student-search');
            const studentList = document.getElementById('student-list');
            const modal = document.getElementById('project-modal');
            const modalClose = document.getElementById('modal-close');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');
            let previouslyFocusedElement;

            const populateStudentDatalist = () => {
                const studentNames = new Set();
                projectData.forEach(project => {
                    project.students.forEach(student => studentNames.add(student.name));
                });
                studentList.innerHTML = '';
                [...studentNames].sort().forEach(name => {
                    const option = document.createElement('option');
                    option.value = name;
                    studentList.appendChild(option);
                });
            };

            const renderProjects = (filteredProjects) => {
                projectsGrid.innerHTML = '';
                const searchValue = studentSearch.value.toLowerCase().trim();

                if (filteredProjects.length === 0) {
                    projectsGrid.innerHTML = `<p class="text-center text-gray-400 col-span-full">Aucune production ne correspond √† votre recherche.</p>`;
                    return;
                }
                filteredProjects.forEach(project => {
                    const projectCard = document.createElement('div');
                    projectCard.className = 'bg-card p-6 rounded-2xl cursor-pointer card-hover';
                    projectCard.dataset.projectId = project.id;
                    
                    const memberCount = project.students.length;

                    let searchResultHtml = '';
                    if (searchValue) {
                        const matchingStudents = project.students
                            .filter(student => student.name.toLowerCase().includes(searchValue))
                            .map(student => student.name);

                        if (matchingStudents.length > 0) {
                            searchResultHtml = `
                                <div class="mt-4 pt-4 border-t border-card">
                                    <p class="text-xs text-gray-400">R√©sultat pour : <span class="font-semibold text-gold">${matchingStudents.join(', ')}</span></p>
                                </div>
                            `;
                        }
                    }
                    
                    projectCard.innerHTML = `
                        <h3 class="text-2xl font-bold text-white mb-2">${project.name}</h3>
                        <p class="text-sm text-gray-400 mb-4 h-12 overflow-hidden">${project.mission}</p>
                        <div class="flex justify-between items-center text-sm">
                            <span class="font-semibold text-gray-300">${memberCount} r√©alisateur${memberCount > 1 ? 's' : ''}</span>
                            <span class="text-gold font-medium">Consulter le Brief ‚Üí</span>
                        </div>
                        ${searchResultHtml}
                    `;
                    projectsGrid.appendChild(projectCard);
                });
            };

            const filterAndRender = () => {
                const searchValue = studentSearch.value.toLowerCase().trim();
                let filteredData = projectData;
                if (searchValue) {
                    filteredData = projectData.filter(project => 
                        project.students.some(student => student.name.toLowerCase().includes(searchValue))
                    );
                }
                renderProjects(filteredData);
            };

            const openModal = (projectId) => {
                const project = projectData.find(p => p.id == projectId);
                if (!project) return;
                
                previouslyFocusedElement = document.activeElement;

                const searchValue = studentSearch.value.toLowerCase().trim();
                
                modalTitle.textContent = project.name;
                
                let studentsHtml = project.students.map(student => {
                    const isHighlighted = searchValue && student.name.toLowerCase().includes(searchValue);
                    const highlightClass = isHighlighted ? 'highlight' : '';

                    return `
                    <div class="py-4 border-b border-card last:border-b-0 ${highlightClass} -mx-6 px-6">
                        <div class="flex items-center justify-between gap-4">
                            <p class="font-bold text-lg text-white">${student.name}</p>
                            <span class="text-sm font-medium flex-shrink-0 ${student.class === 'A' ? 'bg-red-900/50 text-red-200' : 'bg-blue-900/50 text-blue-200'} py-1 px-3 rounded-full">Classe ${student.class}</span>
                        </div>
                        <div class="text-gray-400 mt-2">
                            <strong class="text-gold block font-medium">${student.mission.title}</strong>
                            <p class="text-sm mt-1 text-gray-300">${student.mission.description}</p>
                        </div>
                    </div>
                `}).join('');

                modalBody.innerHTML = `
                    <div class="bg-black/20 p-6 rounded-lg mb-8">
                         <h3 class="text-xl font-semibold text-gold mb-2">Brief du Film</h3>
                         <p class="text-base text-gray-300">${project.mission}</p>
                    </div>
                    <h4 class="text-xl font-semibold text-gold mb-2">Missions des R√©alisateurs</h4>
                    <div>${studentsHtml}</div>
                `;
                
                modal.classList.remove('invisible', 'opacity-0');
                modal.querySelector('.modal-content').classList.remove('-translate-y-10');
                
                const focusableElements = modal.querySelectorAll('button');
                focusableElements[0].focus();
            };

            const closeModal = () => {
                modal.classList.add('invisible', 'opacity-0');
                modal.querySelector('.modal-content').classList.add('-translate-y-10');
                if (previouslyFocusedElement) {
                    previouslyFocusedElement.focus();
                }
            };
            
            const handleKeyboardNavigation = (e) => {
                if(modal.classList.contains('invisible')) return;

                const focusableElements = modal.querySelectorAll('button');
                const firstElement = focusableElements[0];
                const lastElement = focusableElements[focusableElements.length - 1];

                if (e.key === 'Tab') {
                    if (e.shiftKey) {
                        if (document.activeElement === firstElement) {
                            lastElement.focus();
                            e.preventDefault();
                        }
                    } else {
                        if (document.activeElement === lastElement) {
                            firstElement.focus();
                            e.preventDefault();
                        }
                    }
                }
                
                if (e.key === 'Escape') {
                    closeModal();
                }
            };

            projectsGrid.addEventListener('click', (e) => {
                const card = e.target.closest('[data-project-id]');
                if (card) {
                    openModal(card.dataset.projectId);
                }
            });

            modalClose.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });

            studentSearch.addEventListener('input', filterAndRender);
            document.addEventListener('keydown', handleKeyboardNavigation);
            
            populateStudentDatalist();
            renderProjects(projectData);
        });
    </script>
</body>
</html>
